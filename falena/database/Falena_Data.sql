-- MySQL Script generated by MySQL Workbench
-- Mon Oct 26 09:09:23 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema falena
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema falena
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `falena` DEFAULT CHARACTER SET utf8mb4 ;
USE `falena` ;

-- -----------------------------------------------------
-- Table `falena`.`categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `falena`.`categories` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `image` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;

LOCK TABLES `categories` WRITE;
ALTER TABLE `categories` DISABLE KEYS;
INSERT INTO `categories` VALUES (1,'Ensayo','default-picture.png'),(2,'Novela','default-picture.png'),(3,'Crónica','default-picture.png'),(4,'Comic','default-picture.png'),(5,'Cuento','default-picture.png'),(6,'Poesía','default-picture.png'),(7,'Magia','default-picture.png'),(8,'Otros','default-picture.png'),(9,'Arquitectura y diseño','default-picture.png'),(10,'Arte','default-picture.png'),(11,'Autoayuda y desarrollo personal','default-picture.png'),(12,'Biografías y autobiografías','default-picture.png'),(13,'Ciencia','default-picture.png'),(14,'Ciencia Ficción','default-picture.png'),(15,'Clásicos','default-picture.png'),(16,'Cocina y gastronomía','default-picture.png'),(17,'Comics y manga','default-picture.png'),(18,'Cuentos','default-picture.png'),(19,'Deportes','default-picture.png'),(20,'Derecho','default-picture.png'),(21,'Economía y negocios','default-picture.png'),(22,'Ensayo','default-picture.png'),(23,'Espiritualidad','default-picture.png'),(24,'Familia, relaciones y crianza','default-picture.png'),(25,'Feminismo','default-picture.png'),(26,'Filosofía','default-picture.png'),(27,'Guías prácticas','default-picture.png'),(28,'Historia','default-picture.png'),(29,'Humor','default-picture.png'),(30,'Infantil','default-picture.png'),(31,'Informática y técnica','default-picture.png'),(32,'Jardinería','default-picture.png'),(33,'Juvenil','default-picture.png'),(34,'LGBT','default-picture.png'),(35,'Matemáticas','default-picture.png'),(36,'Medicina','default-picture.png'),(37,'Música','default-picture.png'),(38,'Naturaleza y animales','default-picture.png'),(39,'No ficción','default-picture.png'),(40,'Novela contemporánea','default-picture.png'),(41,'Novela histórica','default-picture.png'),(42,'Novela romántica, erótica','default-picture.png'),(43,'Nutrición','default-picture.png'),(44,'Poesía','default-picture.png'),(45,'Policiales, thrillers y suspenso','default-picture.png'),(46,'Política y actualidad','default-picture.png'),(47,'Psicología','default-picture.png'),(48,'Religion','default-picture.png'),(49,'Teatro y películas','default-picture.png'),(50,'Tecnología','default-picture.png'),(51,'Textos educactivos','default-picture.png'),(52,'Turismo','default-picture.png');
ALTER TABLE `categories` ENABLE KEYS;
UNLOCK TABLES;

-- -----------------------------------------------------
-- Table `falena`.`products`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `falena`.`products` (
  `id` INT(11) NOT NULL,
  `name` VARCHAR(100) NOT NULL,
  `author` VARCHAR(50) NOT NULL,
  `price` DECIMAL(5,2) UNSIGNED NOT NULL,
  `review` VARCHAR(500) NOT NULL,
  `category_id` INT(11) NOT NULL,
  `section` VARCHAR(25) NOT NULL,
  `image` VARCHAR(100) NOT NULL,
  `rating` DECIMAL(5,1) NOT NULL,
  `discount` INT(3) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fkProducts_categories_idx` (`category_id` ASC),
  CONSTRAINT `fkProducts_categories`
    FOREIGN KEY (`category_id`)
    REFERENCES `falena`.`categories` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;
LOCK TABLES `products` WRITE;
ALTER TABLE `products` DISABLE KEYS;
INSERT INTO `products` VALUES 
(1,'La sangre manda','STEPHEN KING',1299,20,'«La sangre manda». Así reza la máxima periodística que hará que Holly Gibney; la detective a la que Bill Hodges legó su agencia Finders Keepers; y uno de los personajes más queridos por los fans de Stephen King; se interese por la matanza en el instituto Albert Macready y acabe enganchada a las noticias. En esta ocasión deberá luchar contra lo que más teme...; y esta vez sola.','Novela','masVendidos','sangre.jpg'),
(2,'La rosa en el viento','GALLARDO SARA',850,10,'«La rosa que en el viento se destruye deja volar sus pétalos en una luz quemada», se lee en esta novela alucinada de Sara Gallardo, la última que publicó, un punto de llegada extraordinario para una obra deslumbrante, siempre certera, siempre singular, siempre cautivadora.','Novela','masVendidos','image_2.png'),
(3,'Correspondencia','OCAMPO VICTORIA & WOOLF VIRGINIA',820,10,'Correspondencia reúne las cartas que se escribieron V. Ocampo y V Woolf. El libro, compilado y prologado por Manuela Barral, incluye Virginia Woolf en su diario texto de Ocampo publicado por Sur en 1954 además de algunos manuscritos inéditos de ambas autoras.','Crónica','masVendidos','image_3.png'),
(4,'Amado señor','KATCHADJIAN PABLO',690,30,'Tierra larga será contra la insistencia en inocular la percepción de que el camino es una línea recta y continua hacia un destino No Tan Parecidos echa por tierra esa idea y también la forma recta de la historieta','Novela','ultimaVisita','image_4.png'),
(5,'Tierra larga','NO TAN PARECIDOS',790,15,'Tierra larga será contra la insistencia en inocular la percepción de que el camino es una línea recta y continua hacia un destino? No Tan Parecidos echa por tierra esa idea y también la forma recta de la historieta','Comic','recomendados','image_5.png'),
(6,'Paprika Johnson y otro relatos','BARNES DJUNA',1390,30,'Djuna Barnes, a pesar de ser admirada por autores de la talla de James Joyce, T. S. Eliot, Carson McCullers o Anaïs Nin, cayó en el olvido al ser opacada por los hombres de su generación, «la generación perdida','Cuento','masVendidos','image_6.png'),
(7,'It (eso)','STEPHEN KING',2399,10,'El libro que inspiró a la película homónima. ¿Quién o qué mutila y mata a los niños de un pequeño pueblo norteamericano? ¿Por qué llega cíclicamente el horror a Derry en forma de un payaso siniestro que va sembrando la destrucción a su paso? Esto es lo que se proponen averiguar los protagonistas de esta novela. Tras veintisiete años de tranquilidad y lejanía una antigua promesa infantil les hace volver al lugar en el que vivieron su infancia y juventud como una terrible pesadilla. Regresan a Derry para enfrentarse con su pasado y enterrar definitivamente la amenaza que los amargó durante su niñez. Saben que pueden morir; pero son conscientes de que no conocerán la paz hasta que aquella cosa sea destruida para siempre.','Novela','masVendidos','it.jpg'),
(8,'Acaricio Perros','ITURRASPE CONSUELO',500,10,'¿Cuánto tiempo hay que pisar un suelo para que se convierta en un hogar? ¿Cómo se pausa el desencuentro? . La profundidad de las preguntas que se hace la autora a lo largo de este poemario no sólo hacen de guía para esta lectura, sino que se convierten en el recurso perfecto para traducir el desconsuelo y la enorme sensación de pérdida que produce la muerte','Poesía','ultimaVisita','image_8.png'),
(9,'El río se adelantó de golpe','PANZA ACHELI',500,30,'tapas en cartulina de ±250 gr con impresión tipográfica a 2 tintas y tapa con Ilustración de Valeria Fukunaga materializada tipográficamente por Papel Principal mediante un cuño confeccionado mediante la técnica de clise de magnesio.','Poesía','recomendados','image_9.png'),
(10,'Los planetas nos aman','BECHELLI ADRIÁN',1000,30,'Narra la historia de Miwa, una joven que decide recuperar la sabiduría olvidada de su abuelo astrólogo. Para eso, viaja a las montañas en busca de Kai, el único discípulo de su abuelo, quien la conecta con el arte de interpretar el cielo','Novela','ultimaVisita','image_10.png'),
(11,'Demian','HERMANN HESSE',670,33,'Emil Sinclair es un niño que ha pasado toda su vida en lo que él llama el Scheinwelt (mundo de ensueño o mundo de la luz), pero una mentira lo lleva a ampliar sus visiones del mundo y a conocer un personaje enigmático de nombre Max Demian que lo llevará por los senderos del autorrazonamiento destruyendo paradigmas materialistas que antes lo rodeaban.','Novela','ultimaVisita','demian.jpg'),
(12,'Alliances, un juego de luz','STAN LEE',1390,25,'¿Qué es mas real? ¿el mundo en el que nacemos o el que nos creamos? El nuevo universo del mayor creador de maravillas de nustros tiempos: Stan Lee. Una nueva generación de héroes está lista. Son jóvenes y rebeldes; poseen superpoderes extraordinarios y no tienen miedo de usarlos. ¿Su objetivo? Derrotar el mal que amenaza con destruir el planeta.','Otros','masVendidos','stan-lee.jpg'),
(13,'Pandemia, virus y miedo','MONICA MÜLLER',910,20,'Hoy el Covid-19 amenaza con su potencial letal a toda la humanidad. Para ubicarse en un escenario equidistante del terror y del escepticismo que todo lo simplifica; Mónica Müller investigó en archivos de prensa; textos médicos y testimonios directos las pandemias de 1918; 2009 y 2020; y también se propuso determinar la verosimilitud de las versiones conspirativas. En algunos casos; la conclusión es indudable. En otros; el margen de sospecha se mantiene intacto. Con el estilo del mejor thriller médico y el rigor de una especialista; Mónica Müller convierte Pandemia en un ensayo objetivo y necesario para entender lo que pasó y lo que vendrá.','Otros','masVendidos','pandemia.jpg'),
(14,'Un planeta llamado agua','BECHELLI ADRIÁN',1200,20,'Kai, maestro de astrología, viaja a la costa para reencontrarse con Miwa, su aprendiz. En un entorno natural paradisíaco, entre desencuentros y aventuras, se irá desplegando la cualidad energética de los planetas.','Novela','novedades','image_14.png'),
(15,'El presente','ANA BASUALDO',600,30,'Este libro es un recorrido por épocas, lugares y personalidades muy distintos –Leonardo Favio y Amy Winehouse, Antonio Di Benedetto y Pablo Iglesias, la quinta de San Vicente y las confiterías de Buenos Aires–, pero un hilo dorado los enhebra a todos: la mirada y el oído prodigiosos de una cronista para la que cada palabra escrita brilla con luz propia.','Otros','novedades','tapa.png'),
(16,'Secretos revelados','LAIN GARCIA CALVO',690,30,'La Biblia es mucho más que una serie de cuentos, narraciones o historias con un significado literal. La Biblia encierra un conocimiento oculto destinado solamente para los “iniciados”. Un saber que cambia la forma de pensar de todo aquél que lo descubra. Una cosa es el significado historico de la Biblia, donde se narran una serie de hechos e historias reales que ocurrieron hace muchos años atrás. Otra cosa es el significado oculto que hay detrás de esos hechos históricos, que no se expresó literalmente, pues solo unos pocos están preparados para entender y aplicar. Ese ocultismo está destinado a los iniciados que tengan el llamado de saber más y estén preparados par entenderlo.','Novela','ultimaVisita','secretos.jpg'),
(17,'Biss Eula','Inmunidad',1450,12,'Al dar a luz a su primer hijo, la ensayista Eula Biss descubre que la maternidad puede también convertirse en una experiencia aterradora y el mundo en un lugar hostil y lleno de peligros. Ante la escala inabarcable de amenazas globales como el terrorismo, los intereses de las grandes corporaciones o la contaminación medioambiental, nuestros temores y sospechas se dirigen incluso contra lo que debería protegernos: los medicamentos y las vacunas.','Ensayo','masVendidos','image_1.png');
ALTER TABLE `products` ENABLE KEYS;
UNLOCK TABLES;

-- -----------------------------------------------------
-- Table `falena`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `falena`.`users` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `first_name` VARCHAR(45) NOT NULL,
  `last_name` VARCHAR(45) NOT NULL,
  `dni` INT(8) NOT NULL,
  `phone_number` INT(15) NULL DEFAULT NULL,
  `adress` VARCHAR(45) NULL DEFAULT NULL,
  `zip_code` INT(5) NULL DEFAULT NULL,
  `email` VARCHAR(45) NOT NULL,
  `password` VARCHAR(100) NOT NULL,
  `rol` VARCHAR(45) NOT NULL,
  `profile_picture` VARCHAR(45) NOT NULL,
  `date` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;
LOCK TABLES `users` WRITE;
ALTER TABLE `users` DISABLE KEYS;
INSERT INTO `users` VALUES 
(1,'Santiago','Uría','43150555',NULL,NULL,NULL,'uriasantiago.a@gmail.com','$2b$10$R85nEPvG.NDk.IE8cIeEteTteRuFCyXDckIaM1yKJq/5WhBNB12fC','user','default-picture.png',NULL),
(2,'Noah','Goulding','26859123',NULL,NULL,NULL,'noahgoulding@gmail.com','$2b$10$.t3Ls9gip2QhAEQOqA/DOuoFbPIR3i47KC9SESz3cXtp4cdLnZhcu','user','default-picture.png',NULL),
(3,'Emilija','Chapman','24188574',NULL,NULL,NULL,'emilijachapman@gmail.com','$2b$10$db5adjx047zhkPFi/fx4COiUzGRhyrbSxO1c5CMdoXEWjCXmgeMIm','user','default-picture.png',NULL),
(4,'Lillian','Sargent','20758969',NULL,NULL,NULL,'liliansargent@gmail.com','$2b$10$DcNCmmmvmdIUbNPvdVzqY.xpoQ.OEPqWDYeLekmb47tLbOdrLGsD.','user','default-picture.png',NULL),
(5,'Donnie','Mcdonnell','33555789',NULL,NULL,NULL,'donniemcdonnell@gmail.com','$2b$10$y5yIUyXKG3j8uq3qzi8/qezgbs1aauqawCNlOfX8vgcoK4r8x.K.m','user','default-picture.png',NULL),
(6,'Waseem','Mckenzie','17859285',NULL,NULL,NULL,'waseemmckenzie@gmail.com','$2b$10$MqPCnYyaXss1KD2MJcTjIubbdYLhr/vOmTu3Ly8p1h8MCW6fz/JVu','user','default-picture.png',NULL),
(7,'Mattie','Hoffman','39687452',NULL,NULL,NULL,'mattiehoffman@gmail.com','$2b$10$64tt89btkmzWaY2os3Khle4X3NTJVWgqb1vF3CZn3ZZ906mLPJg.u','user','default-picture.png',NULL),
(8,'Christine','Craig','12333421',NULL,NULL,NULL,'christinecraig@gmail.com','$2b$10$iwDmt84rKVayEepiMRQK1eNusZ48SoXQwmcsDIMHEQpY5js7C5HYe','user','default-picture.png',NULL),
(9,'Tianna','Rowley','37195842',NULL,NULL,NULL,'tiannarowley@gmail.com','$2b$10$b5GwozvrlBnapgQf3icX/uZhBrNjmGQPlyGF51C5G8ZI8BCGljF0.','user','default-picture.png',NULL),
(10,'Inayah','Mercado','44256875',NULL,NULL,NULL,'inayahmercado@gmail.com','$2b$10$OWBOebVBmFGMYaEnoZzbC.kOmHj7klKupUo91vknfXDysaaLl2ZwS','userdefault-picture.png',NULL),
(11,'Nate','Gentile', '45789654',NULL,NULL,NULL,'nategentile@gmail.com','$2b$10$iAvFw21ktNUM580TxrSOTeAgrVPIwzrTxnhdXg8mvNAp9TDsjU8N6','user','default-picture.png',NULL),
(12,'Kira','Yoshikage', '15498666',NULL,NULL,NULL,'kirayoshikage@gmail.com','$2b$10$vmk/BRrbFTVdpVC2NsRFee4VDbXwukweq559WVU9HPn8Qm3Wfn3PW','user','default-picture.png',NULL),
(13,'Smokey','Brown','22478139',NULL,NULL,NULL,'smokeybrown@gmail.com','$2b$10$q1bQePN9/T.kk.hQxULJL.VqV8bOGwbdHC7RhY6v0OGWm3DMIztea','user','default-picture.png',NULL),
(14,'Robyn','Mchamon','55716482',NULL,NULL,NULL,'robynmachamon@gmail.com','$2b$10$AyYF6dPV2peSx9qWgXtTr.kggkhOiOAKyRFrpXfnozWYENOL.Ih/O','user','default-picture.png',NULL),
(15,'Arthur','Hayes','44759351',NULL,NULL,NULL,'arthurhayes@gmail.com','$2b$10$iLgAsgTHOwYSiDIqahfjt.mJ2JIrvrelGWB/tP8JwR7VJUsDeqD2.','user','default-picture.png',NULL),
(16,'admin','admin','12345678',NULL,NULL,NULL,'admin@admin.com','$2b$10$MwprUMRD5s0MnDFuJ2ECv.JJd25BoNyJssVVOttAaqqRGM1OHjAnm','admin','default-picture.png',NULL),
(17,'visitante','visitante','87654321',NULL,NULL,NULL,'visitante@vistante.com','$2b$10$OewGhk4Dd34bLBNbUzpDXOW2psoROCiDGyv9CYYA6IxCkptDnXbh6','user','default-picture.png',NULL);
ALTER TABLE `users` ENABLE KEYS;
UNLOCK TABLES;

-- -----------------------------------------------------
-- Table `falena`.`cart_items`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `falena`.`cart_items` (
  `id` INT(11) NOT NULL,
  `user_id` INT(11) NOT NULL,
  `product_id` INT(11) NOT NULL,
  `quantity` INT(2) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `product_id_idx` (`product_id` ASC),
  INDEX `user_id_idx` (`user_id` ASC),
  CONSTRAINT `product_id`
    FOREIGN KEY (`product_id`)
    REFERENCES `falena`.`products` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `falena`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `falena`.`orders`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `falena`.`orders` (
  `id` INT(11) NOT NULL,
  `user_id` INT(11) NOT NULL,
  `transaction_id` INT(11) NOT NULL,
  `total_cost` DECIMAL(10,2) NOT NULL,
  `status` VARCHAR(15) NOT NULL,
  `created_at` DATETIME NOT NULL,
  `modified_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
  PRIMARY KEY (`id`),
  INDEX `fkOrders_users` (`user_id` ASC),
  INDEX `fkOrders_orderItems` (`transaction_id` ASC),
  CONSTRAINT `fkOrdersUsers`
    FOREIGN KEY (`user_id`)
    REFERENCES `falena`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `falena`.`order_items`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `falena`.`order_items` (
  `id` INT(11) NOT NULL,
  `transaction_id` INT(11) NOT NULL,
  `product_id` INT(11) NOT NULL,
  `price` DECIMAL(10,2) NOT NULL,
  `quantity` INT(2) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fkOrderItems_products_idx` (`product_id` ASC),
  INDEX `fkOrderItems_orders_idx` (`transaction_id` ASC),
  CONSTRAINT `fkOrderItems_orders`
    FOREIGN KEY (`transaction_id`)
    REFERENCES `falena`.`orders` (`transaction_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fkOrderItems_products`
    FOREIGN KEY (`product_id`)
    REFERENCES `falena`.`products` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
